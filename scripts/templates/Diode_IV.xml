<?xml version='1.0'  encoding='UTF-8' standalone='yes'?>

<ROOT>
 <HEADER>
  <TYPE>
   <EXTENSION_TABLE_NAME>HALFMOON_METADATA</EXTENSION_TABLE_NAME>
   <NAME>Tracker Halfmoon Metadata</NAME>
  </TYPE>
  <RUN mode="SEQUENCE_NUMBER" sequence="TRK_OT_RUN_SEQ">

    <RUN_TYPE>PQC</RUN_TYPE>
    <LOCATION>{{ rawdata.location }}</LOCATION>
    <INITIATED_BY_USER>{{ rawdata.operator }}</INITIATED_BY_USER>
    <RUN_BEGIN_TIMESTAMP>{{ rawdata.RUN_BEGIN_TIMESTAMP }}</RUN_BEGIN_TIMESTAMP>

    <COMMENT_DESCRIPTION></COMMENT_DESCRIPTION>

  </RUN>
 </HEADER>
 <DATA_SET>

  <COMMENT_DESCRIPTION>Metadata with flute and structure</COMMENT_DESCRIPTION>
  <VERSION>v2</VERSION>
  <PART>
    <NAME_LABEL>{{ rawdata.NAME_LABEL }}</NAME_LABEL>
    <KIND_OF_PART>{{ rawdata.KIND_OF_PART }}</KIND_OF_PART>
  </PART>

  <DATA>  

    <KIND_OF_HM_SET_ID>{{ rawdata.KIND_OF_HM_SET_ID }}</KIND_OF_HM_SET_ID>
    <KIND_OF_HM_FLUTE_ID>{{ rawdata.KIND_OF_HM_FLUTE_ID }}</KIND_OF_HM_FLUTE_ID>
    <KIND_OF_HM_STRUCT_ID>{{ rawdata.KIND_OF_HM_STRUCT_ID }}</KIND_OF_HM_STRUCT_ID>
    <KIND_OF_HM_CONFIG_ID>{{ rawdata.KIND_OF_HM_CONFIG_ID }}</KIND_OF_HM_CONFIG_ID>
    

    <PROCEDURE_TYPE>{{ rawdata.measurement_name }}</PROCEDURE_TYPE>
    <FILE_NAME>{{ rawdata.FILE_NAME }}</FILE_NAME>
    <EQUIPMENT>{{ rawdata.contact_name }} {{ rawdata.sample_position }}</EQUIPMENT>
    <WAITING_TIME_S>{{ rawdata.WAITING_TIME_S }}</WAITING_TIME_S>

  </DATA>

  <CHILD_DATA_SET>
   <HEADER>
    <TYPE>
     <EXTENSION_TABLE_NAME>TEST_SENSOR_IV</EXTENSION_TABLE_NAME>
     <NAME>Tracker Halfmoon IV Test</NAME>
    </TYPE>
   </HEADER>
   <DATA_SET>
    <COMMENT_DESCRIPTION>{{ rawdata.sample_comment }}</COMMENT_DESCRIPTION>
    <VERSION>IV_measurement-004</VERSION>
    <PART>
      <NAME_LABEL>{{ rawdata.NAME_LABEL }}</NAME_LABEL>
      <KIND_OF_PART>{{ rawdata.KIND_OF_PART }}</KIND_OF_PART>
    </PART>
{% for id in range(rawdata.data.len) %}

    <DATA>
     <TIME>{{ rawdata.data.timestamp_abs[id] }}</TIME>
     <VOLTS>{{ rawdata.data.v[id] }}</VOLTS>
     <BIASCURRNT_NAMPR>{{ rawdata.data.i_elm[id] }}</BIASCURRNT_NAMPR>
     <CURRNT_NAMP>{{ rawdata.data.i[id] }}</CURRNT_NAMP>
     <TEMP_DEGC>{{ rawdata.data.temp[id] }}</TEMP_DEGC>
     <AIR_TEMP_DEGC>{{ rawdata.data.temp_box[id] }}</AIR_TEMP_DEGC>
     <RH_PRCNT>{{ rawdata.data.humidity[id] }}</RH_PRCNT>
    </DATA>
    
{% endfor %}
    
    <CHILD_DATA_SET>
     <HEADER>
      <TYPE>
       <EXTENSION_TABLE_NAME>HALFMOON_IV_PAR</EXTENSION_TABLE_NAME>
       <NAME>Tracker Halfmoon IV Parameters</NAME>
      </TYPE>
     </HEADER>
     <DATA_SET>
      <COMMENT_DESCRIPTION>Test</COMMENT_DESCRIPTION>
      <VERSION>IV_measurement-004</VERSION>
      <PART>
        <NAME_LABEL>{{ rawdata.NAME_LABEL }}</NAME_LABEL>
        <KIND_OF_PART>{{ rawdata.KIND_OF_PART }}</KIND_OF_PART>
      </PART>
      <DATA>  

          {# <VBD_V>1000.000</VBD_V> #}
          <I600_PAMPR>{{ rawdata.data.i_600 }}</I600_PAMPR>
          {# <VI600_NAMPRMM3>0.131</VI600_NAMPRMM3> #}

      </DATA>
     </DATA_SET>
    </CHILD_DATA_SET>
   </DATA_SET>

  </CHILD_DATA_SET>



 </DATA_SET>

</ROOT>
